{"title":"Programming","markdown":{"yaml":{"title":"Programming"},"headingText":"Programming in R","containsRefs":false,"markdown":"\n\n```{r}\n#| include: false\ninstalled <- installed.packages()[,1]\npkgs <- c(\"remotes\", \"ipumsr\", \"XML\", \"tidyverse\", \"sf\", \"ggplot2\", \"classInt\", \"ggspatial\")\ninstall <- pkgs[!(pkgs %in% installed)]\nif(length(install)) install.packages(install, dependencies = TRUE, repos = \"https://cloud.r-project.org\")\n```\n\n\nSo far in this course we have been cutting and pasting from these webpages into the Console of R Studio. Working in the Console is useful if you want to work with code on a line-by-line basis -- sometimes it is helpful to see if something will work; to try things out. However, in practice, it is better to write and work with more reproducible code, either for your own benefit so you can modify something without having entirely to start-over, or for the benefit of others who would like to reproduce your work. Reproducibility is an important component of open research and is to be encouraged wherever possible.\n\n## Scripts\n\nA script is a text file containing a sequence of commands that can be run together, one after the other, without entering them separately in the Console. Let's download an example of a script:\n\n```{r}\ndownload.file(\"https://github.com/profrichharris/profrichharris.github.io/raw/main/MandM/scripts/script1.R\",\n              \"script1.R\", mode = \"wb\", quiet = TRUE)\n```\n\nYou can now use `file.edit(\"script1.R\")` to view its contents. It should look like this:\n\n![](script1.png)\n\n</br>\nThe script is essentially the same code that was used previously when answering the question \"why R?\", producing maps of ethnic diversity in the English cities of Birmingham, Leicester, London and Manchester. The main difference is that the maps are output to create a .pdf file rather than to screen. \n\nIf you now click within the window of the script and use command-A (Mac) or ctrl-A (Windows) to select all the code, followed by command-Enter/Return (Mac) or ctrl-Enter/Return (Windows) -- or use the Run button towards the top-right of the script window -- then the script will run in its entirety and should, at its conclusion, produce the document maps.pdf in your Working Directory.\n\n**Be patient whilst the code takes a few moments to run.**\n\nYou can check the document is there with,\n\n```{r}\nfile.exists(\"maps.pdf\")\n```\n\nand you should be able to open it with,\n\n```{r}\n#| eval: false\nsystem(\"open maps.pdf\")\n```\n\nTry also typing `source(\"script1.R\", echo = TRUE)` into the R Console. Again, the script should run in its entirety.\n\n## R markdown\n\nScripts are useful but sometimes we wish to author documents that combine written text such as this with executable R code and its outputs, then to publish them as html, pdf or Word documents. This is where [R Markdown](https://rmarkdown.rstudio.com/lesson-1.html){target=\"_blank\"} is useful.\n\nFrom the dropdown menus, select File -> New File -> R Markdown. Create the document in html format and give it any title you like.\n\n![](markdown.jpg)\n\nAfter R Studio has created the document, **Knit** it. The first time you do this, you will be asked to save the document - call it markdown1.Rmd or any other name you prefer.\n\n![](knit.jpg)\n\nIt is self-evident what knitting the document does -- it produce an html file which includes the text and formatting, the R code (unless suppressed with `echo = FALSE`) and output from that code. It also includes the option to publish the document on [RPubs](https://rpubs.com/) (although I suggest you don't do this now).\n\n![](publish.jpg)\n\n</br>\nThis whole course is written based on R Markdown. You can download the markdown file for this session\n\n```{r}\n#| eval: false\ndownload.file(\"https://github.com/profrichharris/profrichharris.github.io/raw/main/MandM/markdown/programming.Rmd\", \"markdown_example.Rmd\", mode = \"wb\", quiet = TRUE)\n```\n\nand view it using `file.edit(\"markdown_example.Rmd\")`. You may note that it begins with a YAML header, to which various arguments can be added or changed -- [see here](https://zsmith27.github.io/rmarkdown_crash-course/lesson-4-yaml-headers.html){target=\"_blank\"} for an introduction.\n\n```{verbatim}\n---\ntitle: \"Programming\"\nauthor: \"Rich Harris\"\ndate: '2022-07-11'\noutput: html_document\n---\n```\n\nIt then consists of a mixture of text and code chunks. Those code chunks can be executed within the document using the Run drop-down menus and buttons.\n\n![](markdown2.jpg){}\n\n</br>\nThe document also includes various syntax, including `##header` for a header, `**bold**` for **bold**, `![](image.png)` to insert an existing image file, and so forth. To learn more, see the [R Markdown cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf){target=\"_blank\"}.\n\n## The source code for this document\n\nThis page has actually been authored in a variant of R markdown, using [quarto](https://quarto.org/){target=\"_blank\"}. You can view the source code for this and other pages using View Source from the drop-down Code options at the top of the page.\n\n![](source.jpg)\n\n## Summary\n\nAlthough a lot of what we will do in this course will involve cutting and pasting into the Console, keep in mind that there are better ways of programming that are more reproducible than entering commands one at a time into the Console. These include scripting and using markdown. Note also that as commands are entered into the Console, they are saved in the History to the top right of the screen. All or part of that history can be selected and moved to a source file (a new R Script) as the following shows. The history can also be saved -- see `?save.history()`.\n\n![](hist.png)\n\n## Further reading\n\n![](efficient_programming.png){width=150}\n\nThe book, Efficient R programming by Colin Gillespie and Robin Lovelace has an [online version here](https://csgillespie.github.io/efficientR/){target=\"_blank\"}.\n\nMore about R Markdown can be learned from [https://rmarkdown.rstudio.com/](https://rmarkdown.rstudio.com/){target=\"_blank\"}. It is a bit advanced for this stage of the course but it is worth noting that there is a [cheatsheet available](https://posit.co/wp-content/uploads/2022/10/package-development-1.pdf){target=\"_blank\"}.\n","srcMarkdownNoYaml":"\n\n```{r}\n#| include: false\ninstalled <- installed.packages()[,1]\npkgs <- c(\"remotes\", \"ipumsr\", \"XML\", \"tidyverse\", \"sf\", \"ggplot2\", \"classInt\", \"ggspatial\")\ninstall <- pkgs[!(pkgs %in% installed)]\nif(length(install)) install.packages(install, dependencies = TRUE, repos = \"https://cloud.r-project.org\")\n```\n\n## Programming in R\n\nSo far in this course we have been cutting and pasting from these webpages into the Console of R Studio. Working in the Console is useful if you want to work with code on a line-by-line basis -- sometimes it is helpful to see if something will work; to try things out. However, in practice, it is better to write and work with more reproducible code, either for your own benefit so you can modify something without having entirely to start-over, or for the benefit of others who would like to reproduce your work. Reproducibility is an important component of open research and is to be encouraged wherever possible.\n\n## Scripts\n\nA script is a text file containing a sequence of commands that can be run together, one after the other, without entering them separately in the Console. Let's download an example of a script:\n\n```{r}\ndownload.file(\"https://github.com/profrichharris/profrichharris.github.io/raw/main/MandM/scripts/script1.R\",\n              \"script1.R\", mode = \"wb\", quiet = TRUE)\n```\n\nYou can now use `file.edit(\"script1.R\")` to view its contents. It should look like this:\n\n![](script1.png)\n\n</br>\nThe script is essentially the same code that was used previously when answering the question \"why R?\", producing maps of ethnic diversity in the English cities of Birmingham, Leicester, London and Manchester. The main difference is that the maps are output to create a .pdf file rather than to screen. \n\nIf you now click within the window of the script and use command-A (Mac) or ctrl-A (Windows) to select all the code, followed by command-Enter/Return (Mac) or ctrl-Enter/Return (Windows) -- or use the Run button towards the top-right of the script window -- then the script will run in its entirety and should, at its conclusion, produce the document maps.pdf in your Working Directory.\n\n**Be patient whilst the code takes a few moments to run.**\n\nYou can check the document is there with,\n\n```{r}\nfile.exists(\"maps.pdf\")\n```\n\nand you should be able to open it with,\n\n```{r}\n#| eval: false\nsystem(\"open maps.pdf\")\n```\n\nTry also typing `source(\"script1.R\", echo = TRUE)` into the R Console. Again, the script should run in its entirety.\n\n## R markdown\n\nScripts are useful but sometimes we wish to author documents that combine written text such as this with executable R code and its outputs, then to publish them as html, pdf or Word documents. This is where [R Markdown](https://rmarkdown.rstudio.com/lesson-1.html){target=\"_blank\"} is useful.\n\nFrom the dropdown menus, select File -> New File -> R Markdown. Create the document in html format and give it any title you like.\n\n![](markdown.jpg)\n\nAfter R Studio has created the document, **Knit** it. The first time you do this, you will be asked to save the document - call it markdown1.Rmd or any other name you prefer.\n\n![](knit.jpg)\n\nIt is self-evident what knitting the document does -- it produce an html file which includes the text and formatting, the R code (unless suppressed with `echo = FALSE`) and output from that code. It also includes the option to publish the document on [RPubs](https://rpubs.com/) (although I suggest you don't do this now).\n\n![](publish.jpg)\n\n</br>\nThis whole course is written based on R Markdown. You can download the markdown file for this session\n\n```{r}\n#| eval: false\ndownload.file(\"https://github.com/profrichharris/profrichharris.github.io/raw/main/MandM/markdown/programming.Rmd\", \"markdown_example.Rmd\", mode = \"wb\", quiet = TRUE)\n```\n\nand view it using `file.edit(\"markdown_example.Rmd\")`. You may note that it begins with a YAML header, to which various arguments can be added or changed -- [see here](https://zsmith27.github.io/rmarkdown_crash-course/lesson-4-yaml-headers.html){target=\"_blank\"} for an introduction.\n\n```{verbatim}\n---\ntitle: \"Programming\"\nauthor: \"Rich Harris\"\ndate: '2022-07-11'\noutput: html_document\n---\n```\n\nIt then consists of a mixture of text and code chunks. Those code chunks can be executed within the document using the Run drop-down menus and buttons.\n\n![](markdown2.jpg){}\n\n</br>\nThe document also includes various syntax, including `##header` for a header, `**bold**` for **bold**, `![](image.png)` to insert an existing image file, and so forth. To learn more, see the [R Markdown cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf){target=\"_blank\"}.\n\n## The source code for this document\n\nThis page has actually been authored in a variant of R markdown, using [quarto](https://quarto.org/){target=\"_blank\"}. You can view the source code for this and other pages using View Source from the drop-down Code options at the top of the page.\n\n![](source.jpg)\n\n## Summary\n\nAlthough a lot of what we will do in this course will involve cutting and pasting into the Console, keep in mind that there are better ways of programming that are more reproducible than entering commands one at a time into the Console. These include scripting and using markdown. Note also that as commands are entered into the Console, they are saved in the History to the top right of the screen. All or part of that history can be selected and moved to a source file (a new R Script) as the following shows. The history can also be saved -- see `?save.history()`.\n\n![](hist.png)\n\n## Further reading\n\n![](efficient_programming.png){width=150}\n\nThe book, Efficient R programming by Colin Gillespie and Robin Lovelace has an [online version here](https://csgillespie.github.io/efficientR/){target=\"_blank\"}.\n\nMore about R Markdown can be learned from [https://rmarkdown.rstudio.com/](https://rmarkdown.rstudio.com/){target=\"_blank\"}. It is a bit advanced for this stage of the course but it is worth noting that there is a [cheatsheet available](https://posit.co/wp-content/uploads/2022/10/package-development-1.pdf){target=\"_blank\"}.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"program.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"flatly","title":"Programming"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}